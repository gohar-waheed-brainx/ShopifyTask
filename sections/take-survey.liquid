{{ 'section-take-survey.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .take-survey-container {
    margin-top: {{ section.settings.margin_top | times: 0.75 | round: 0 }}px;
    margin-bottom: {{ section.settings.margin_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .take-survey-container {
      margin-top: {{ section.settings.margin_top }}px;
      margin-bottom: {{ section.settings.margin_bottom }}px;
    }
  }
{%- endstyle -%}

<div class= "page-width take-survey-container">
    <div class="take-survey-background-container">
        <div class="take-survey-banner-wrapper">
            <p class= "take-survey-banner-text">
                {% if section.settings.banner-text != blank %}
                    {{ section.settings.banner-text }}
                {% endif %}
            </p>
        </div>
        <div class= "take-survey-content">
            {% if section.settings.heading != blank %}
                {%- assign special_text = section.settings.special_text -%}
                {%- assign heading_words = section.settings.heading | split: ' ' -%}
                {%- assign modified_heading = '' -%}
        
                {%- for word in heading_words -%}
                    {%- if forloop.index == 6 -%}
                        {%- assign modified_heading = modified_heading | append: ' <span class="take-servey-heading-special-text">' | append: special_text | append: '</span> ' | append: word -%}
                    {%- else -%}
                        {%- assign modified_heading = modified_heading | append: ' ' | append: word -%}
                    {%- endif -%}
                {%- endfor -%}
                <p class="take-survey-content-heading">
                    {{ modified_heading | strip }}
                </p>
            {% endif %}
            {% if  section.settings.subtitle-text != blank%}
                <p class="take-survey-content-subtitle">
                    {{ section.settings.subtitle-text }}
                </p>
            {% endif %}
            {% if section.settings.button_label != blank %}
                <button class= "take-survey-content-button">
                    {{ section.settings.button_label }}
                </button>
            {% endif %}
            {% if section.settings.subtitle-text-2 != blank %}
                <p class= "take-survey-content-button-subtitle">
                    {% for i in (1..5) %}
                        <span class="star-icon">&#9733;</span>
                    {% endfor %}
                  <span style= "margin-left: 3px">  {{ section.settings.subtitle-text-2 }} </span>
                </p>
            {% endif %}
        </div>
    </div>
</div>

{% schema %}
{
  "name": "Take Survey",
  "class": "section",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "banner-text",
      "default": "Banner Text",
      "label": "Banner Text"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Heading Text Will Be Here",
      "label": "Heading"
    },
    {
        "type": "text",
        "id": "special_text",
        "default": "Extraordinary",
        "label": "Special Text"
    },
    {
        "type": "inline_richtext",
        "id": "subtitle-text",
        "default": "Subtitle Text Will Be Here",
        "label": "Subtitle text"
    },
    {
        "type": "text",
        "id": "button_label",
        "default": "Button label",
        "label": "Button Text"
    },
    {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
    },
    {
        "type": "inline_richtext",
        "id": "subtitle-text-2",
        "default": "Subtitle Text 2 Will Be Here",
        "label": "Subtitle text 2"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Top",
      "default": 36
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Take Survey"
    }
  ]
}
{% endschema %}